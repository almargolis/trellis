{% extends "base.html" %}

{% block title %}{{ article.metadata.title }} - {{ site_name }}{% endblock %}

{% block content %}
<article class="article-full">
    <header class="article-header">
        <h1>{{ article.metadata.title }}</h1>

        <!-- Breadcrumbs -->
        {% if breadcrumbs %}
        <nav class="article-breadcrumbs">
            {% for name, url in breadcrumbs %}
                {% if loop.last %}
                    <span class="breadcrumb-current">{{ name }}</span>
                {% else %}
                    <a href="{{ url }}" class="breadcrumb-link">{{ name }}</a>
                    <span class="breadcrumb-sep">/</span>
                {% endif %}
            {% endfor %}
        </nav>
        {% endif %}

        <div class="article-dates">
            <div class="date-group">
                <span class="date-label">Created</span>
                <time>{{ article.metadata.created_date }}</time>
            </div>
            <div class="date-group">
                <span class="date-label">Published</span>
                <time>{{ article.metadata.published_date }}</time>
            </div>
            <div class="date-group">
                <span class="date-label">Updated</span>
                <time>{{ article.metadata.updated_date }}</time>
            </div>
        </div>

        {% if article.metadata.tags %}
        <div class="tags">
            {% for tag in article.metadata.tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </header>

    <div class="article-content">
        {{ article.content|safe }}
    </div>

    {% if current_user.is_authenticated and current_user.is_editor() %}
    <div class="admin-actions">
        <a href="{{ url_for('editor.edit', garden_slug=garden.slug, article_path=article.slug) }}" class="btn btn-edit">Edit Article</a>
    </div>
    {% endif %}
</article>

{% if comments_enabled %}
<div id="comments-section">
    <h2>Comments</h2>

    {# Comment submission form #}
    {% include 'qdcomments/comment_form.html' %}

    {# Comment list #}
    {% include 'qdcomments/comment_list.html' %}
</div>
{% endif %}
{% endblock %}
